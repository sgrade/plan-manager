# Plan Manager

[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](LICENSE)
[![Python: 3.13+](https://img.shields.io/badge/python-3.13+-blue.svg)](https://www.python.org/downloads/)
[![CI](https://github.com/sgrade/plan-manager/actions/workflows/ci.yml/badge.svg)](https://github.com/sgrade/plan-manager/actions/workflows/ci.yml)
[![codecov](https://codecov.io/gh/sgrade/plan-manager/branch/main/graph/badge.svg)](https://codecov.io/gh/sgrade/plan-manager)
[![Code style: ruff](https://img.shields.io/badge/code%20style-ruff-000000.svg)](https://github.com/astral-sh/ruff)
[![Type checked: mypy](https://img.shields.io/badge/type%20checked-mypy-blue.svg)](https://mypy-lang.org/)

Sync AI agent(s) and models around common goals and constraints.

## Overview

AI agents supported by models operate in a limited context window. If the amount of work is greater, there is a need to periodically coordinate the agent with broader plans. Moreover, if several AI models or agents perform different tasks, for example, to optimize costs, they need to be synchronized. The Plan Manager makes it easier to coordinate agents and LLMs with a plan according to user-defined constraints.

## Positioning

For large projects we use project management systems like Jira or Linear. With their help, leaders coordinate work of developers.

Plan Manager is a tool for a single developer or orchestrator to coordinate work of one or more AI agents or models. For example, ask an expensive thinking model to create a plan and document it in Plan Manager. Delegate work items (stories, tasks) to less expensive models. Review the summary of work before and after the work item is completed, correct deviations from the plan. Export the report to the changelog and/or to larger project management systems.

## Core concepts

- Plan: groups stories.
- Story: user-facing goal; contains tasks.
- Task: discrete unit of agent work.
- Statuses: apply to plans, stories, and tasks; primary progression is TODO → IN_PROGRESS → PENDING_REVIEW → DONE; side states: BLOCKED, DEFERRED.
- Approvals: optional guardrail before progressing status.
- Dependencies: tasks/stories may block others.
- Priority: 0–5 (0 is highest).

## Installation

> ⚠️ **Pre-release:** Plan Manager is not yet published to PyPI.
> Install from source (see [Contributing](docs/contributing.md)) or GitHub:
>
> ```bash
> pip install git+https://github.com/sgrade/plan-manager.git
> ```

### Future: PyPI Installation (when published)

```bash
# Using uv (recommended)
uv add plan-manager

# Using pip
pip install plan-manager
```

## Quick Start

### Start the Server

```bash
# Using uv
uv run pm

# Using pip installation
pm
```

The server will start on `http://localhost:3000/mcp`.

### Connect from Cursor IDE

Add to your `.cursor/mcp.json`:

```json
{
  "mcpServers": {
    "plan-manager": {
      "url": "http://localhost:3000/mcp"
    }
  }
}
```

## Usage

### Convenience

Plan manager is stable and has proven to be very useful for coordinating the actions of AI agents and models working on the same project. On the other hand, it may lack the user-friendly interface, flexibility, and other qualities that are expected from a mature product aimed at a wide audience. This is a reasonable decision: to develop quickly with limited resources; to focus on functions that arise as a result of practical use in real projects, and to avoid the overhead of non-core development.

Currently, the most convenient way is to run Plan Manager in devcontainer on the same laptop/desktop computer where you have IDE/agents. Use web interface of [MCP Inspector](dev/mcp-inspector/README.md) as the main GUI and the browse files function to view the raw data generated by Plan Manager.

### Connecting to the Server

#### Connect in the devcontainer

- **Start the server:** `uv run pm`
- **Endpoint:** `http://localhost:3000/mcp`
- **Browse files:** `http://localhost:3000/browse`

#### Connect from another container on the same host.

Change `localhost` to `host.docker.internal` in the MCP configuration. For example:

```json
{
  "mcpServers": {
    "plan-manager": {
      "url": "http://host.docker.internal:3000/mcp"
    }
  }
}
```

#### Connect from another host

Set environment variable `HOST=0.0.0.0` when starting the server, then connect using the host's IP address instead of `localhost`.

If starting Plan Manager in the devcontainer, you can add the environment variable to existing ones in the devcontainer.json by modifying `containerEnv`.

```json
{
  "containerEnv": {
    "HOST": "0.0.0.0"
  }
}
```

See [docs/config_reference.md](docs/config_reference.md) for details.

Security Considerations.

Important: When binding to 0.0.0.0, the server will accept connections from any computer on your network. As authentication is not yet implemented, other people will have access to Plan Manager.

### Hints

Instruct the AI agent to use Plan Manager, when you start a new chat.

Use `/` in the client (Cursor) chat window to list Plan Manager prompts (instructions, templates to interact with the server).

Use MCP inspector to explore Plan Manager capabilities - [doc](dev/mcp-inspector/README.md).

Use the commands as explained on the workflow diagrams [docs/project_workflow.md](docs/project_workflow.md). In this way the agents/LLMs need to think less to understand what you mean, so they respond much faster, the request is cheaper, and the result is more predictable.

There is a document primarily for agents using Plan Manager, which can also be useful for humans to understand how the agents learn about Plan Manager: [usage_guide_agents.md](docs/usage_guide_agents.md).

Both documents are exposed as an MCP [resources](https://modelcontextprotocol.io/specification/2025-06-18/server/resources) to the agents.

## Contributing

Want to contribute? See [docs/contributing.md](docs/contributing.md) for development setup, testing, and guidelines.

## Documentation

- [Contributing Guide](docs/contributing.md)
- [Usage Guide for Agents](docs/usage_guide_agents.md)
- [Project Workflow](docs/project_workflow.md)
- [Configuration Reference](docs/config_reference.md)
- [Triage Guide](docs/triage_guide.md)
- [Release Checklist](docs/release_checklist.md)
- [API Documentation](https://sgrade.github.io/plan-manager/)

## License

MIT License - see [LICENSE](LICENSE) file for details.

## Acknowledgments

Built with:
- [FastMCP](https://github.com/jlowin/fastmcp) - MCP server framework
- [Pydantic](https://pydantic-docs.helpmanual.io/) - Data validation
- [Starlette](https://www.starlette.io/) - ASGI framework
- [uv](https://github.com/astral-sh/uv) - Fast Python package manager
